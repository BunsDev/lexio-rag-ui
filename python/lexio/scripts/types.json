{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "RetrievalResult": {
      "title": "RetrievalResult",
      "anyOf": [
        {
          "$ref": "#/definitions/SourceReference"
        },
        {
          "$ref": "#/definitions/TextContent"
        }
      ]
    },
    "BaseSourceContent": {
      "title": "BaseSourceContent",
      "type": "object",
      "properties": {
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "metadata"
      ]
    },
    "BaseRetrievalResult": {
      "title": "BaseRetrievalResult",
      "type": "object",
      "properties": {
        "sourceName": {
          "type": "string",
          "title": "sourceName"
        },
        "relevanceScore": {
          "type": "number",
          "title": "relevanceScore"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        },
        "highlights": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PDFHighlight"
          },
          "title": "highlights"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "sourceName",
        "relevanceScore",
        "metadata",
        "highlights"
      ]
    },
    "Message": {
      "description": "Represents a message in the chat",
      "title": "Message",
      "type": "object",
      "properties": {
        "role": {
          "description": "The role of the message sender",
          "enum": [
            "assistant",
            "user"
          ],
          "type": "string",
          "title": "role"
        },
        "content": {
          "description": "The content of the message",
          "default": "",
          "type": "string",
          "title": "content"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "role",
        "content"
      ],
      "required": [
        "content",
        "role"
      ]
    },
    "SourceReference": {
      "title": "SourceReference",
      "type": "object",
      "properties": {
        "type": {
          "enum": [
            "html",
            "markdown",
            "pdf"
          ],
          "type": "string",
          "title": "type"
        },
        "sourceReference": {
          "type": "string",
          "title": "sourceReference"
        },
        "sourceName": {
          "type": "string",
          "title": "sourceName"
        },
        "relevanceScore": {
          "type": "number",
          "title": "relevanceScore"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        },
        "highlights": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PDFHighlight"
          },
          "title": "highlights"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "type",
        "sourceReference",
        "sourceName",
        "relevanceScore",
        "metadata",
        "highlights"
      ],
      "required": [
        "sourceReference"
      ]
    },
    "TextContent": {
      "title": "TextContent",
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "title": "text"
        },
        "sourceName": {
          "type": "string",
          "title": "sourceName"
        },
        "relevanceScore": {
          "type": "number",
          "title": "relevanceScore"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        },
        "highlights": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PDFHighlight"
          },
          "title": "highlights"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "text",
        "sourceName",
        "relevanceScore",
        "metadata",
        "highlights"
      ],
      "required": [
        "text"
      ]
    },
    "MarkdownSourceContent": {
      "title": "MarkdownSourceContent",
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "title": "content"
        },
        "type": {
          "type": "string",
          "const": "markdown",
          "title": "type"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "content",
        "type",
        "metadata"
      ],
      "required": [
        "content",
        "type"
      ]
    },
    "HTMLSourceContent": {
      "title": "HTMLSourceContent",
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "title": "content"
        },
        "type": {
          "type": "string",
          "const": "html",
          "title": "type"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "content",
        "type",
        "metadata"
      ],
      "required": [
        "content",
        "type"
      ]
    },
    "PDFSourceContent": {
      "title": "PDFSourceContent",
      "type": "object",
      "properties": {
        "content": {
          "$ref": "#/definitions/Uint8Array",
          "title": "content"
        },
        "type": {
          "type": "string",
          "const": "pdf",
          "title": "type"
        },
        "highlights": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PDFHighlight"
          },
          "title": "highlights"
        },
        "metadata": {
          "$ref": "#/definitions/Record",
          "title": "metadata"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "content",
        "type",
        "highlights",
        "metadata"
      ],
      "required": [
        "content",
        "type"
      ]
    },
    "PDFHighlight": {
      "title": "PDFHighlight",
      "type": "object",
      "properties": {
        "page": {
          "type": "number",
          "title": "page"
        },
        "rect": {
          "type": "object",
          "properties": {
            "top": {
              "type": "number",
              "title": "top"
            },
            "left": {
              "type": "number",
              "title": "left"
            },
            "width": {
              "type": "number",
              "title": "width"
            },
            "height": {
              "type": "number",
              "title": "height"
            }
          },
          "defaultProperties": [],
          "additionalProperties": false,
          "propertyOrder": [
            "top",
            "left",
            "width",
            "height"
          ],
          "required": [
            "height",
            "left",
            "top",
            "width"
          ],
          "title": "rect"
        },
        "comment": {
          "type": "string",
          "title": "comment"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "page",
        "rect",
        "comment"
      ],
      "required": [
        "page",
        "rect"
      ]
    },
    "SourceContent": {
      "title": "SourceContent",
      "anyOf": [
        {
          "$ref": "#/definitions/MarkdownSourceContent"
        },
        {
          "$ref": "#/definitions/HTMLSourceContent"
        },
        {
          "$ref": "#/definitions/PDFSourceContent"
        }
      ]
    },
    "RetrieveResponse": {
      "title": "RetrieveResponse",
      "type": "object",
      "properties": {
        "__@toStringTag@23": {
          "type": "string",
          "title": "__@toStringTag@23"
        }
      },
      "defaultProperties": [],
      "additionalProperties": false,
      "propertyOrder": [
        "then",
        "catch",
        "finally",
        "__@toStringTag@23"
      ],
      "required": [
        "__@toStringTag@23"
      ]
    },
    "GenerateInput": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Message"
      }
    },
    "GenerateResponse": {
      "title": "GenerateResponse",
      "anyOf": [
        {
          "$ref": "#/definitions/Promise<string>"
        },
        {
          "$ref": "#/definitions/AsyncIterable<GenerateStreamChunk>"
        }
      ]
    }
  }
}